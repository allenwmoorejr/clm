"use client";import {useEffect,useState} from 'react';type Ann={id:string;text:string;href?:string;starts?:string;ends?:string};export function AnnouncementsBar(){const [ann,setAnn]=useState<Ann|null>(null);const [dismissed,setDismissed]=useState(false);useEffect(()=>{fetch('/announcements.json').then(r=>r.json()).then((items:Ann[])=>{const now=new Date();const active=items.find(a=>{const startOk=!a.starts||new Date(a.starts)<=now;const endOk=!a.ends||new Date(a.ends)>=now;const notClosed=!localStorage.getItem(`ann-dismissed-${a.id}`);return startOk&&endOk&&notClosed});if(active) setAnn(active)}).catch(()=>{})},[]);if(!ann||dismissed) return null;return (<div className='bg-brand-600/20 border-b border-white/10'><div className='container py-2 text-sm flex items-center justify-between gap-4'><div className='truncate'>{ann.href?<a className='hover:underline' href={ann.href}>{ann.text}</a>:ann.text}</div><button onClick={()=>{localStorage.setItem(`ann-dismissed-${ann.id}`,'1');setDismissed(true)}} className='text-white/70 hover:text-white'>Dismiss</button></div></div>)}